/* Page container aligns with the shell (TopBar + optional SubNav handled by .content-area) */
.pipeline-page { min-height: 100vh; }

/* Header */
.pipeline .pipeline-header{
  display: grid;
  align-items: start;
  gap: .75rem;
  margin: 1rem 0 0.5rem;
}
.pipeline .pipeline-header h1{
  margin: 0;
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--color-text);
}

/* Assistant */
.pipeline-ai-top { width: 100%; }

/* Vertical stack of stages */
.pipeline-vertical{
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

/* Stage section */
.pl-stage{
  background: var(--color-bg-card);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: var(--shadow-0);
  padding: .75rem;
}

/* Sticky header inside card for long rows */
.pl-stage-header{
  position: sticky;
  top: 0; /* sticks within stage box */
  z-index: 1;
  display: flex; align-items: center; justify-content: space-between;
  padding: .25rem .35rem .5rem;
  background: var(--color-bg-card);
  border-bottom: 1px solid var(--color-border);
  border-top-left-radius: 10px; border-top-right-radius: 10px;
}
.pl-stage-header h3{
  margin: 0; font-size: 1rem; font-weight: 600;
}
.pl-stage-header .count{
  background: var(--bg-2);
  color: var(--color-text);
  padding: 2px 8px; border-radius: 999px; font-size: .75rem; font-weight: 600;
}

/* Horizontal row with edge fades + snap */
.pl-row{
  position: relative;
  display: flex; gap: .75rem;
  overflow-x: auto;
  padding: .75rem .25rem .5rem;
  scroll-snap-type: x proximity;
}
.pl-row::-webkit-scrollbar{ height: 8px; }
.pl-row::-webkit-scrollbar-thumb{
  background: var(--border-0);
  border-radius: 6px;
}

/* Card */
.pl-card{
  flex: 0 0 280px;
  background: var(--color-bg-card);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  box-shadow: var(--shadow-0);
  padding: .65rem .7rem;
  cursor: pointer;
  transition: border-color .12s ease, box-shadow .12s ease;
  scroll-snap-align: start;
}
.pl-card:hover{
  transform: none;
  box-shadow: var(--shadow-0);
  border-color: var(--color-accent);
}
.pl-card.selected{ outline: 2px solid var(--color-accent); }

/* Card header */
.pl-card-top{
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center; gap: .5rem;
}
.pl-check{ display:inline-flex; align-items:center; }
.pl-name{ font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.pl-value{ font-weight: 700; }

/* Meta + chips */
.pl-chip-row{
  margin-top: .35rem;
  display: flex;
  gap: .35rem;
  flex-wrap: wrap;
}
.pl-card-meta{ margin-top: .25rem; font-size: .85rem; opacity: .9; }
.pl-chips{ margin-top: .35rem; display: flex; gap: .35rem; flex-wrap: wrap; }

/* Compact chip + note */
.pl-chip{
  background: var(--bg-2);
  border: 1px solid var(--color-border);
  color: var(--color-text);
  padding: 2px 8px;
  border-radius: 999px;
  font-size: .75rem;
}
.pl-note{
  max-width: 220px;
  font-size: .78rem;
  opacity: .9;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* Message preview */
.pl-msg{
  margin-top: .35rem;
  font-size: .82rem;
  opacity: .9;
  display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
}

/* Empty / errors */
.pl-empty{ margin: .75rem 0 .25rem; opacity: .8; }
.pl-loading{ margin: .75rem 0; opacity: .9; }
.pl-error{ margin: .75rem 0; color: #d33; }

/* Show more */
.pl-more{ padding: .25rem; }
.pl-more .filters-button{ height: 34px; }

/* Responsive */
@media (max-width: 900px){
  .pl-card{ flex-basis: 240px; }
}
